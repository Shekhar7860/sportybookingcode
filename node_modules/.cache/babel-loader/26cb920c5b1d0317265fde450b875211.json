{"ast":null,"code":"import { useState, useMemo, useEffect, createElement, useRef } from 'react';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar _excluded = [\"children\", \"render\"];\n\nfunction usePrevious(value) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nfunction useTabs(tabs, defaultTab) {\n  var state = useState();\n  var selectedTab = state[0],\n      setSelectedTab = state[1];\n  var activeIndex = useMemo(function () {\n    if (selectedTab) {\n      return tabs.indexOf(selectedTab);\n    }\n\n    return -1;\n  }, [selectedTab, tabs]);\n  var previousActiveIndex = usePrevious(activeIndex);\n  useEffect(function () {\n    if (tabs.length === 0) {\n      setSelectedTab(undefined);\n      return;\n    }\n\n    if (selectedTab === null || selectedTab && tabs.includes(selectedTab)) {\n      return;\n    }\n\n    if (typeof previousActiveIndex === 'number' && previousActiveIndex >= 0 && (tabs[previousActiveIndex] || tabs[previousActiveIndex - 1])) {\n      setSelectedTab(tabs[previousActiveIndex] || tabs[previousActiveIndex - 1]);\n      return;\n    }\n\n    if (defaultTab === null) {\n      return;\n    }\n\n    setSelectedTab(defaultTab && tabs.includes(defaultTab) ? defaultTab : tabs[0]);\n  }, [selectedTab, defaultTab, tabs]);\n  return state;\n}\n\nfunction TabPanel(_ref) {\n  var children = _ref.children,\n      _ref$render = _ref.render,\n      render = _ref$render === void 0 ? 'lazy' : _ref$render,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _React$useState = useState(render === 'always'),\n      shouldRender = _React$useState[0],\n      setShouldRender = _React$useState[1];\n\n  useEffect(function () {\n    if (props.hidden) {\n      return;\n    }\n\n    setShouldRender(true);\n  }, [props.hidden]);\n  return createElement(\"div\", Object.assign({}, props), shouldRender ? children : null);\n}\n\nexport { TabPanel, useTabs };","map":{"version":3,"sources":["../src/index.tsx"],"names":["ref","React","useTabs","tabs","defaultTab","state","selectedTab","setSelectedTab","activeIndex","previousActiveIndex","usePrevious","TabPanel","children","render","props","shouldRender","setShouldRender"],"mappings":";;;;;;;;;;;;;;;;;;;AAEA,SAAA,WAAA,CAAA,KAAA,EAAA;AACE,MAAMA,GAAG,GAAGC,MAAZ,EAAA;AAEAA,EAAAA,SAAAA,CAAgB,YAAA;AACdD,IAAAA,GAAG,CAAHA,OAAAA,GAAAA,KAAAA;AADFC,GAAAA,CAAAA;AAIA,SAAOD,GAAG,CAAV,OAAA;AACD;;SAEeE,O,CAA0BC,I,EAAWC,U,EAAAA;AACnD,MAAMC,KAAK,GAAGJ,QAAd,EAAA;AACA,MAAOK,WAAP,GAAsCD,KAAtC,CAAA,CAAA,CAAA;AAAA,MAAoBE,cAApB,GAAsCF,KAAtC,CAAA,CAAA,CAAA;AAEA,MAAMG,WAAW,GAAG,OAAA,CAAc,YAAA;AAChC,QAAA,WAAA,EAAiB;AACf,aAAOL,IAAI,CAAJA,OAAAA,CAAP,WAAOA,CAAP;AACD;;AAED,WAAO,CAAP,CAAA;AALkB,GAAA,EAMjB,CAAA,WAAA,EANH,IAMG,CANiB,CAApB;AAQA,MAAMM,mBAAmB,GAAGC,WAAW,CAAvC,WAAuC,CAAvC;AAEAT,EAAAA,SAAAA,CAAgB,YAAA;AACd,QAAIE,IAAI,CAAJA,MAAAA,KAAJ,CAAA,EAAuB;AACrBI,MAAAA,cAAc,CAAdA,SAAc,CAAdA;AAEA;AACD;;AAED,QAAID,WAAW,KAAXA,IAAAA,IAAyBA,WAAW,IAAIH,IAAI,CAAJA,QAAAA,CAA5C,WAA4CA,CAA5C,EAAyE;AACvE;AACD;;AAED,QACE,OAAA,mBAAA,KAAA,QAAA,IACAM,mBAAmB,IADnB,CAAA,KAECN,IAAI,CAAJA,mBAAI,CAAJA,IAA6BA,IAAI,CAACM,mBAAmB,GAHxD,CAGoC,CAFlC,CADF,EAIE;AACAF,MAAAA,cAAc,CACZJ,IAAI,CAAJA,mBAAI,CAAJA,IAA6BA,IAAI,CAACM,mBAAmB,GADvDF,CACmC,CADrB,CAAdA;AAIA;AACD;;AAED,QAAIH,UAAU,KAAd,IAAA,EAAyB;AACvB;AACD;;AAEDG,IAAAA,cAAc,CACZH,UAAU,IAAID,IAAI,CAAJA,QAAAA,CAAdC,UAAcD,CAAdC,GAAAA,UAAAA,GAAuDD,IAAI,CAD7DI,CAC6D,CAD/C,CAAdA;AA3BFN,GAAAA,EA8BG,CAAA,WAAA,EAAA,UAAA,EA9BHA,IA8BG,CA9BHA,CAAAA;AAgCA,SAAA,KAAA;AACD;;SAEeU,Q,CAAAA,I,EAAAA;MACdC,QAAAA,GAAAA,IAAAA,CAAAA,Q;yBACAC,M;MAAAA,MAAAA,GAAAA,WAAAA,KAAAA,KAAAA,CAAAA,GAAS,MAATA,GAAS,W;MACNC,KAAAA,GAAAA,6BAAAA,CAAAA,IAAAA,EAAAA,SAAAA,C;;AAKH,MAAA,eAAA,GAAwCb,QAAAA,CAAeY,MAAM,KAA7D,QAAwCZ,CAAxC;AAAA,MAAOc,YAAP,GAAA,eAAA,CAAA,CAAA,CAAA;AAAA,MAAqBC,eAArB,GAAA,eAAA,CAAA,CAAA,CAAA;;AAEAf,EAAAA,SAAAA,CAAgB,YAAA;AACd,QAAIa,KAAK,CAAT,MAAA,EAAkB;AAChB;AACD;;AAEDE,IAAAA,eAAe,CAAfA,IAAe,CAAfA;AALFf,GAAAA,EAMG,CAACa,KAAK,CANTb,MAMG,CANHA,CAAAA;AAQA,SAAOA,aAAAA,CAAAA,KAAAA,EAAAA,MAAAA,CAAAA,MAAAA,CAAAA,EAAAA,EAAAA,KAAAA,CAAAA,EAAiBc,YAAY,GAAA,QAAA,GAApC,IAAOd,CAAP;AACD","sourcesContent":["import * as React from 'react';\n\nfunction usePrevious<T>(value: T) {\n  const ref = React.useRef<T>();\n\n  React.useEffect(() => {\n    ref.current = value;\n  });\n\n  return ref.current;\n}\n\nexport function useTabs<K extends string>(tabs: K[], defaultTab?: K | null) {\n  const state = React.useState<K | null>();\n  const [selectedTab, setSelectedTab] = state;\n\n  const activeIndex = React.useMemo(() => {\n    if (selectedTab) {\n      return tabs.indexOf(selectedTab);\n    }\n\n    return -1;\n  }, [selectedTab, tabs]);\n\n  const previousActiveIndex = usePrevious(activeIndex);\n\n  React.useEffect(() => {\n    if (tabs.length === 0) {\n      setSelectedTab(undefined);\n\n      return;\n    }\n\n    if (selectedTab === null || (selectedTab && tabs.includes(selectedTab))) {\n      return;\n    }\n\n    if (\n      typeof previousActiveIndex === 'number' &&\n      previousActiveIndex >= 0 &&\n      (tabs[previousActiveIndex] || tabs[previousActiveIndex - 1])\n    ) {\n      setSelectedTab(\n        tabs[previousActiveIndex] || tabs[previousActiveIndex - 1]\n      );\n\n      return;\n    }\n\n    if (defaultTab === null) {\n      return;\n    }\n\n    setSelectedTab(\n      defaultTab && tabs.includes(defaultTab) ? defaultTab : tabs[0]\n    );\n  }, [selectedTab, defaultTab, tabs]);\n\n  return state;\n}\n\nexport function TabPanel({\n  children,\n  render = 'lazy',\n  ...props\n}: React.HTMLAttributes<HTMLDivElement> & {\n  hidden: boolean;\n  render?: 'always' | 'lazy';\n}) {\n  const [shouldRender, setShouldRender] = React.useState(render === 'always');\n\n  React.useEffect(() => {\n    if (props.hidden) {\n      return;\n    }\n\n    setShouldRender(true);\n  }, [props.hidden]);\n\n  return <div {...props}>{shouldRender ? children : null}</div>;\n}\n"]},"metadata":{},"sourceType":"module"}